===============================================
ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰: D:\prayer_time\web-admin\app.js
===============================================

â–  1) Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© (Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø°ÙŠ ÙÙŠÙ‡ emptyItem ÙˆÙ‚Ø¨Ù„ /* ========== Toast)

const emptyItem = () => ({ _key: ++_itemId, title: "", body: "", image_url: "", link_url: "" });

// Ù„Ù„ØªØ®Ø²ÙŠÙ†: Ø£Ù†Ø´Ø¦ bucket Ø¨Ø§Ø³Ù… "uploads" ÙÙŠ Supabase â†’ Storage
const STORAGE_BUCKET = "uploads";

async function uploadImage(file) {
  if (!supabase || !file) return null;
  var ext = (file.name.split(".").pop() || "png").toLowerCase();
  if (!/^(jpe?g|png|gif|webp)$/.test(ext)) ext = "png";
  var path = "admin/" + Date.now() + "_" + (file.name || "image").replace(/[^a-zA-Z0-9._-]/g, "_") + "." + ext;
  var res = await supabase.storage.from(STORAGE_BUCKET).upload(path, file, { cacheControl: "3600", upsert: false });
  if (res.error) throw new Error(res.error.message);
  var pub = supabase.storage.from(STORAGE_BUCKET).getPublicUrl(res.data.path);
  return pub.data.publicUrl;
}

function ImageUploadField(props) {
  var label = props.label;
  var requiredSize = props.requiredSize;
  var value = props.value || "";
  var onChange = props.onChange;
  var disabled = props.disabled;
  var inputRef = React.useRef(null);
  var [uploading, setUploading] = React.useState(false);
  function handleClick() { if (inputRef.current && !uploading) inputRef.current.click(); }
  function handleFile(e) {
    var f = e.target.files && e.target.files[0];
    e.target.value = "";
    if (!f || !f.type.startsWith("image/")) return;
    setUploading(true);
    uploadImage(f).then(function(url) { if (url && onChange) onChange(url); showToast("ØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© âœ“"); }).catch(function(err) { showToast(err.message || "ÙØ´Ù„ Ø§Ù„Ø±ÙØ¹", "error"); }).finally(function() { setUploading(false); });
  }
  return (
    <div style={{ marginTop: 8 }}>
      {label && <label>{label}</label>}
      {requiredSize && <div className="muted" style={{ fontSize: 12, marginBottom: 4 }}>Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: {requiredSize}</div>}
      <div style={{ display: "flex", gap: 8, flexWrap: "wrap", alignItems: "center" }}>
        <input type="url" value={value} onChange={function(e){if(onChange)onChange(e.target.value);}} placeholder="https://... Ø£Ùˆ Ø§Ø±ÙØ¹ ØµÙˆØ±Ø©" style={{ flex: 1, minWidth: 180 }} />
        <input type="file" ref={inputRef} accept="image/*" style={{ display: "none" }} onChange={handleFile} />
        <button type="button" className="btn-secondary" onClick={handleClick} disabled={disabled || uploading}>{uploading ? "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹..." : "ğŸ“¤ Ø±ÙØ¹ ØµÙˆØ±Ø©"}</button>
      </div>
    </div>
  );
}


â–  2) Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª ÙÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª

â€¢ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù†: Ø¨Ø¹Ø¯ <div className="card-title">...Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù†...
  Ø£Ø¶Ù Ø³Ø·Ø±Ø§Ù‹:
  <div className="muted" style={{ fontSize: 12, marginBottom: 10 }}>ğŸ“ Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù„ØµÙˆØ±Ø© ÙƒÙ„ Ø¥Ø¹Ù„Ø§Ù†: <strong>360Ã—140</strong> Ø¨ÙƒØ³Ù„ (Ø£Ùˆ 720Ã—280 Ù„Ù„ÙˆØ¶ÙˆØ­)</div>
  ÙˆÙÙŠ ListEditor Ø£Ø¶Ù: requiredImageSize="360Ã—140 Ø¨ÙƒØ³Ù„" onUploadImage={uploadImage}

â€¢ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…: Ù†ÙØ³ Ø§Ù„Ø³Ø·Ø± Ø£Ø¹Ù„Ø§Ù‡ ÙˆÙ†ÙØ³ Ø§Ù„Ø®ØµØ§Ø¦Øµ ÙÙŠ ListEditor.

â€¢ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡: Ø£Ø¶Ù:
  <div className="muted" style={{ fontSize: 12, marginBottom: 10 }}>ğŸ“ Ù…Ù‚Ø§Ø³ Ø§Ù„Ù„ÙˆØ¬Ùˆ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: <strong>72Ã—72</strong> Ø¨ÙƒØ³Ù„ (Ù…Ø±Ø¨Ø¹)</div>
  ÙˆØ§Ø³ØªØ¨Ø¯Ù„ Ø­Ù‚Ù„ Ø§Ù„Ù„ÙˆØ¬Ùˆ (Ø±Ø§Ø¨Ø·) Ø¨Ù€:
  <ImageUploadField label="Ø§Ù„Ù„ÙˆØ¬Ùˆ (Ø±Ø§Ø¨Ø· Ø£Ùˆ Ø±ÙØ¹ ØµÙˆØ±Ø©)" requiredSize="72Ã—72 Ø¨ÙƒØ³Ù„" value={clientMeta.logo_url||""} onChange={function(url){setClientMeta(Object.assign({},clientMeta,{logo_url:url}));}} disabled={saving} />

â€¢ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©: Ø£Ø¶Ù:
  <div className="muted" style={{ fontSize: 12, marginBottom: 10 }}>ğŸ“ Ù…Ù‚Ø§Ø³ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: <strong>360Ã—140</strong> Ø¨ÙƒØ³Ù„ (Ø£Ùˆ 720Ã—280 Ù„Ù„ÙˆØ¶ÙˆØ­)</div>
  ÙˆÙÙŠ ContentEditor Ø£Ø¶Ù: requiredImageSize="360Ã—140 Ø¨ÙƒØ³Ù„" onUploadImage={uploadImage}

â–  3) ÙÙŠ ListEditor: Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®ØµØ§Ø¦Øµ requiredImageSize Ùˆ onUploadImageØŒ ÙˆØ¹Ø±Ø¶ ImageUploadField Ø¨Ø¯Ù„ <input> Ù„Ù„ØµÙˆØ±Ø© Ø¹Ù†Ø¯Ù…Ø§ onUploadImage Ù…ÙˆØ¬ÙˆØ¯.

â–  4) ÙÙŠ ContentEditor: Ø¥Ø¶Ø§ÙØ© requiredImageSize Ùˆ onUploadImageØŒ ÙˆØ¹Ø±Ø¶ ImageUploadField Ù„Ù„ØµÙˆØ±Ø© Ø¹Ù†Ø¯Ù…Ø§ onUploadImage Ù…ÙˆØ¬ÙˆØ¯.

===============================================
